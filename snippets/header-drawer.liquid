<style>
  /* --- DRAWER CONTAINER --- */
  .mobile-drawer-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.5); z-index: 2000;
    opacity: 0; visibility: hidden; transition: 0.3s;
  }
  .mobile-drawer-panel {
    position: fixed; top: 0; left: 0; bottom: 0;
    width: 90%; max-width: 400px;
    background: #121212; /* Dark theme base */
    z-index: 2001;
    transform: translateX(-100%);
    transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1);
    display: flex; flex-direction: column;
    overflow-y: auto;
    color: #fff;
  }

  /* Active States */
  .mobile-drawer-overlay.active { opacity: 1; visibility: visible; }
  .mobile-drawer-panel.active { transform: translateX(0); }

  /* --- 1. TOP BAR --- */
  .mm-top {
    display: flex; justify-content: space-between; align-items: center;
    padding: 15px 20px;
    border-bottom: 1px solid #2a2a2a;
  }
  .mm-close-btn { background: none; border: none; color: #fff; cursor: pointer; }

  /* --- 2. WARNING BAR --- */
  .mm-warning {
    background: #1a1a1a;
    padding: 10px 20px;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 1px;
    color: #888;
    text-transform: uppercase;
    display: flex; align-items: center; gap: 8px;
    border-bottom: 1px solid #2a2a2a;
  }

  /* --- 3. PRODUCT SCROLLER --- */
  .mm-scroller-wrap {
    padding: 20px 0 20px 20px;
    border-bottom: 1px solid #2a2a2a;
  }
  .mm-scroller {
    display: flex;
    overflow-x: auto;
    gap: 15px;
    padding-bottom: 10px; /* Space for scrollbar */
    scrollbar-width: none; /* Hide scrollbar Firefox */
  }
  .mm-scroller::-webkit-scrollbar { display: none; } /* Hide scrollbar Chrome */
  
  .mm-prod-card {
    min-width: 140px; width: 140px;
    text-decoration: none; color: #fff;
    position: relative;
  }
  .mm-prod-img {
    width: 100%; border-radius: 8px;
    aspect-ratio: 1; object-fit: cover;
    background: #222;
  }
  .mm-badge {
    position: absolute; top: 6px; left: 6px;
    font-size: 9px; padding: 3px 6px;
    border-radius: 4px; font-weight: bold;
    z-index: 1;
  }
  .mm-prod-title {
    font-size: 12px; margin: 8px 0 4px;
    line-height: 1.3; font-weight: 500;
  }
  .mm-prod-price {
    font-size: 13px; font-weight: 700; color: #dcb184; /* Gold accent */
  }

  /* --- 4. CATEGORY LIST --- */
  .mm-cat-list {
    padding: 10px 20px;
    list-style: none; margin: 0;
  }
  .mm-cat-label {
    font-size: 12px; color: #666; text-transform: uppercase; 
    margin-bottom: 10px; display: block;
  }
  .mm-cat-item {
    border-bottom: 1px solid #2a2a2a;
  }
  .mm-cat-link {
    display: flex; align-items: center;
    padding: 15px 0;
    text-decoration: none; color: #fff;
  }
  .mm-cat-icon {
    width: 45px; height: 45px;
    border-radius: 6px; background: #333;
    object-fit: cover; margin-right: 15px;
  }
  .mm-cat-text { font-size: 15px; font-weight: 500; flex-grow: 1; }

  /* --- 5. FOOTER LINKS --- */
  .mm-footer {
    margin-top: auto;
    background: #0d0d0d;
    padding: 20px;
    border-top: 1px solid #2a2a2a;
  }
  .mm-footer-grid {
    display: grid; grid-template-columns: 1fr 1fr 1fr;
    gap: 15px; list-style: none; padding: 0; margin: 0;
  }
  .mm-footer-link {
    font-size: 12px; color: #999; text-decoration: none;
    display: block; text-align: center;
  }
</style>

<div class="mobile-drawer-overlay" onclick="document.querySelector('.mobile-drawer-overlay').classList.remove('active'); document.querySelector('.mobile-drawer-panel').classList.remove('active');"></div>

<div class="mobile-drawer-panel">
  
  <div class="mm-top">
    <div class="mm-logo">
      {%- if section.settings.logo != blank -%}
        {{ section.settings.logo | image_url: width: 100 | image_tag: height: 20 }}
      {%- else -%}
        <span style="font-weight:bold; font-size:18px;">{{ shop.name }}</span>
      {%- endif -%}
    </div>
    <button class="mm-close-btn" onclick="document.querySelector('.mobile-drawer-overlay').classList.remove('active'); document.querySelector('.mobile-drawer-panel').classList.remove('active');">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M18 6L6 18M6 6l12 12"/></svg>
    </button>
  </div>

  <div class="mm-warning">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L1 21h22L12 2z"/><path d="M12 16v-6"/><path d="M12 18h.01"/></svg>
    <span>BEST SELLERS - LOW STOCK ⚠️</span>
  </div>

  <div class="mm-scroller-wrap">
    <div class="mm-scroller">
      {%- for block in section.blocks -%}
        {%- if block.type == 'drawer_product' -%}
          {% assign p = block.settings.product %}
          {%- if p != blank -%}
            <a href="{{ p.url }}" class="mm-prod-card">
              {%- if block.settings.badge != blank -%}
                <span class="mm-badge" style="background: {{ block.settings.badge_bg }};">{{ block.settings.badge }}</span>
              {%- endif -%}
              <img src="{{ p.featured_image | image_url: width: 300 }}" class="mm-prod-img" loading="lazy">
              <div class="mm-prod-title">{{ p.title | truncate: 35 }}</div>
              <div class="mm-prod-price">
                <span style="text-decoration: line-through; color: #666; margin-right:5px;">{{ p.compare_at_price | money }}</span>
                {{ p.price | money }}
              </div>
            </a>
          {%- endif -%}
        {%- endif -%}
      {%- endfor -%}
    </div>
  </div>

  <div class="mm-cat-list">
    <span class="mm-cat-label">Categories</span>
    {%- for block in section.blocks -%}
      {%- if block.type == 'drawer_cat' -%}
        <div class="mm-cat-item">
          <a href="{{ block.settings.url }}" class="mm-cat-link">
            {%- if block.settings.image != blank -%}
              {{ block.settings.image | image_url: width: 100 | image_tag: class: 'mm-cat-icon' }}
            {%- else -%}
              <div class="mm-cat-icon" style="background:#444;"></div>
            {%- endif -%}
            <span class="mm-cat-text">{{ block.settings.title }}</span>
            <svg width="20" height="20" stroke="#666" fill="none" stroke-width="1.5"><path d="M9 18l6-6-6-6"/></svg>
          </a>
        </div>
      {%- endif -%}
    {%- endfor -%}
  </div>

  <footer class="mm-footer">
    <ul class="mm-footer-grid">
      {%- for block in section.blocks -%}
        {%- if block.type == 'drawer_foot' -%}
          <li><a href="{{ block.settings.url }}" class="mm-footer-link">{{ block.settings.title }}</a></li>
        {%- endif -%}
      {%- endfor -%}
    </ul>
  </footer>

</div>