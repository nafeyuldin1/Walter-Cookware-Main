<link rel="stylesheet" href="{{ 'component-list-menu.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-search.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-menu-drawer.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-cart-notification.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-price.css' | asset_url }}" media="print" onload="this.media='all'">

{%- if section.settings.menu_type_desktop == 'mega' -%}
  <link rel="stylesheet" href="{{ 'component-mega-menu.css' | asset_url }}" media="print" onload="this.media='all'">
{%- endif -%}

{% liquid
  # --- LOGIC START ---
  # Define Scheme Classes
  assign default_scheme_class = 'color-' | append: section.settings.color_scheme
  assign home_scheme_class = 'color-' | append: section.settings.color_scheme_home
  assign sticky_scheme_class = 'color-' | append: section.settings.color_scheme_sticky
  
  # Determine Initial State via Liquid (Server Side for Zero Flicker)
  if request.page_type == 'index'
    assign is_home = true
    assign initial_state = 'transparent'
    assign initial_class = home_scheme_class
  else
    assign is_home = false
    assign initial_state = 'standard'
    assign initial_class = default_scheme_class
  endif
%}

<style>
  header-drawer { justify-self: start; margin-left: -1.2rem; }
  
  {%- if section.settings.sticky_header_type == 'reduce-logo-size' -%}
    .scrolled-past-header .header__heading-logo-wrapper { width: 75%; transition: width 0.3s ease; }
  {%- endif -%}
  
  {%- if section.settings.menu_type_desktop != "drawer" -%}
    @media screen and (min-width: 990px) { header-drawer { display: none; } }
  {%- endif -%}
  
  .menu-drawer-container { display: flex; }
  .list-menu { list-style: none; padding: 0; margin: 0; }
  .list-menu--inline { display: inline-flex; flex-wrap: wrap; }
  summary.list-menu__item { padding-right: 2.7rem; }
  .list-menu__item { display: flex; align-items: center; line-height: calc(1 + 0.3 / var(--font-body-scale)); }
  .list-menu__item--link { text-decoration: none; padding-bottom: 1rem; padding-top: 1rem; line-height: calc(1 + 0.8 / var(--font-body-scale)); }
  
  @media screen and (min-width: 750px) { .list-menu__item--link { padding-bottom: 0.5rem; padding-top: 0.5rem; } }
  
  /* --- CRITICAL STATE-BASED STYLING --- */
  
  /* Base Wrapper */
  .header-wrapper {
      position: relative;
      z-index: 3;
      transition: background-color 0.3s ease, box-shadow 0.3s ease, backdrop-filter 0.3s ease;
      background-color: rgb(var(--color-background));
      color: rgb(var(--color-foreground));
  }

  /* Prevent flickering on page load/refresh */
  .header-wrapper.no-transition {
      transition: none !important;
  }

  /* STATE 1: Transparent (Home Top) */
  .header-wrapper[data-state="transparent"] {
      background-color: transparent !important;
      border-bottom: none !important;
      position: absolute; /* Ensures it sits over the banner */
      width: 100%;
      top: 0;
      left: 0;
      
      /* Optional: Enable blur on transparent state too if desired */
      {% if section.settings.enable_sticky_blur %}
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
      {% endif %}
  }

  /* STATE 2: Sticky (Scrolled Down) - FIX APPLIED HERE */
  .header-wrapper[data-state="sticky"] {
      position: fixed;
      top: 0;
      width: 100%;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      
      /* Default Solid Background */
      background-color: rgb(var(--color-background)) !important; 
      color: rgb(var(--color-foreground)) !important;

      /* BLUR LOGIC: Must use RGBA for transparency */
      {% if section.settings.enable_sticky_blur %}
        background-color: rgba(var(--color-background), 0.8) !important; /* 80% Opacity */
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
      {% endif %}
  }

  /* STATE 3: Standard (Other Pages Top) */
  .header-wrapper[data-state="standard"] {
      background-color: rgb(var(--color-background));
      color: rgb(var(--color-foreground));
      border-bottom: 1px solid rgba(var(--color-foreground), 0.08);
  }

  /* Helper for hiding header on scroll down (if selected) */
  .shopify-section-header-hidden {
      transform: translateY(-100%);
      transition: transform 0.3s ease;
  }
  
  /* --- MEGA MENU CSS --- */
  .cat-strip { 
      display: flex; justify-content: center; gap: 20px; padding: 0 20px; 
      background: inherit; 
      border-top: 1px solid rgba(var(--color-foreground), 0.05); 
      border-bottom: 1px solid rgba(var(--color-foreground), 0.05); 
      overflow-x: auto; 
  }
  .cat-strip__item { 
      background: none; border: none; font-size: 15px; font-weight: 700; text-transform: capitalize; 
      cursor: pointer; padding: 12px 5px; color: rgb(var(--color-foreground)); 
      border-bottom: 3px solid transparent; white-space: nowrap; transition: all 0.2s; letter-spacing: 0.5px; 
  }
  .cat-strip__item:hover, .cat-strip__item.is-active { opacity: 0.7; border-bottom-color: rgb(var(--color-foreground)); }
  .cat-portals-wrapper { position: absolute; left: 0; top: 100%; width: 100%; background: transparent; z-index: 99; display: none; }
  .cat-portals-wrapper.is-open { display: block; animation: fadeIn 0.3s ease; }
  .cat-portal { 
      display: none; max-width: 100%; margin: 0 auto; padding: 40px; gap: 40px; 
      background-color: rgb(var(--color-background)); color: rgb(var(--color-foreground));
      border-bottom: 1px solid rgba(var(--color-foreground), 0.1); box-shadow: 0 10px 20px rgba(0,0,0,0.05);
  }
  .cat-portal[aria-hidden="false"] { display: flex; }
  .cat-portal__left { width: 25%; padding-right: 30px; border-right: 1px solid rgba(var(--color-foreground), 0.1); display: flex; flex-direction: column; justify-content: space-between; }
  .cat-portal__title { font-size: 22px; font-weight: 800; margin: 0 0 10px 0; color: rgb(var(--color-foreground)); }
  .cat-portal__link { font-size: 14px; font-weight: 600; text-decoration: underline; color: rgb(var(--color-foreground)); opacity: 0.8; }
  .cat-portal__desc { font-size: 14px; line-height: 1.5; color: rgb(var(--color-foreground)); opacity: 0.7; margin-top: 15px; font-style: italic; }
  .cat-portal__grid { width: 75%; display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }
  .cat-prod { text-decoration: none; color: rgb(var(--color-foreground)); text-align: center; }
  .cat-prod__media { position: relative; display: block; border-radius: 8px; overflow: hidden; margin-bottom: 10px; aspect-ratio: 1; background: rgba(var(--color-foreground), 0.05); }
  .cat-prod__media img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s; }
  .cat-prod:hover .cat-prod__media img { transform: scale(1.05); }
  .cat-prod__badge { position: absolute; top: 8px; left: 8px; background: #932933; color: #fff; font-size: 10px; font-weight: 700; padding: 4px 8px; border-radius: 4px; z-index: 2; }
  .cat-prod__title { font-size: 13px; font-weight: 600; margin-bottom: 5px; color: rgb(var(--color-foreground)); line-height: 1.3; }
  .cat-prod__price { font-size: 13px; color: rgb(var(--color-foreground)); }
  .cat-prod__price .cmp { text-decoration: line-through; opacity: 0.6; margin-right: 5px; }
  .cat-prod__price .prc { font-weight: 700; }

  @media screen and (max-width: 990px) { .cat-strip, .cat-portals-wrapper { display: none !important; } }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
</style>

{%- style -%}
  .header { padding: {{ section.settings.padding_top | times: 0.5 | round: 0 }}px 3rem {{ section.settings.padding_bottom | times: 0.5 | round: 0 }}px 3rem; }
  .section-header { position: sticky; /* Placeholder for relative positioning context */ }
  @media screen and (min-width: 750px) { .section-header { margin-bottom: {{ section.settings.margin_bottom }}px; } }
  @media screen and (min-width: 990px) { .header { padding-top: {{ section.settings.padding_top }}px; padding-bottom: {{ section.settings.padding_bottom }}px; } }
{%- endstyle -%}

<script src="{{ 'cart-notification.js' | asset_url }}" defer="defer"></script>

{% liquid
  assign header_tag = 'div'
  if section.settings.sticky_header_type != 'none'
    assign header_tag = 'sticky-header'
  endif
%}

<{{ header_tag }}
  {% if header_tag == 'sticky-header' %}
    data-sticky-type="{{ section.settings.sticky_header_type }}"
    
    data-class-home="{{ home_scheme_class }}"
    data-class-default="{{ default_scheme_class }}"
    data-class-sticky="{{ sticky_scheme_class }}"
    
    data-is-home="{{ is_home }}"
  {% endif %}
  
  data-state="{{ initial_state }}"
  class="header-wrapper {{ initial_class }} gradient no-transition"
>
  <header class="header header--{{ section.settings.logo_position }} header--mobile-{{ section.settings.mobile_logo_position }} page-width{% if section.settings.menu_type_desktop == 'drawer' %} drawer-menu{% endif %}{% if section.settings.menu != blank %} header--has-menu{% endif %}">
    
    {%- if section.settings.menu != blank -%}
      {% render 'header-drawer' %}
    {%- endif -%}

    {%- if section.settings.logo_position == 'top-center' or section.settings.menu == blank -%}
      <details-modal class="header__search">
        <details>
          <summary class="header__icon header__icon--search header__icon--summary link focus-inset modal__toggle" aria-haspopup="dialog" aria-label="{{ 'general.search.search' | t }}">
            <span>
              <svg class="modal__toggle-open icon icon-search" aria-hidden="true" focusable="false" role="presentation"><use href="#icon-search"></use></svg>
              <svg class="modal__toggle-close icon icon-close" aria-hidden="true" focusable="false" role="presentation"><use href="#icon-close"></use></svg>
            </span>
          </summary>
          <div class="search-modal modal__content gradient" role="dialog" aria-modal="true" aria-label="{{ 'general.search.search' | t }}">
            <div class="modal-overlay"></div>
            <div class="search-modal__content" tabindex="-1">
                <form action="{{ routes.search_url }}" method="get" role="search" class="search search-modal__form">
                  <div class="field">
                    <input class="search__input field__input" id="Search-In-Modal-1" type="search" name="q" value="" placeholder="{{ 'general.search.search' | t }}">
                    <label class="field__label" for="Search-In-Modal-1">{{ 'general.search.search' | t }}</label>
                    <button class="search__button field__button" aria-label="{{ 'general.search.search' | t }}"><svg class="icon icon-search" aria-hidden="true" focusable="false" role="presentation"><use href="#icon-search"></use></svg></button>
                  </div>
                </form>
            </div>
          </div>
        </details>
      </details-modal>
    {%- endif -%}

    {%- if section.settings.logo_position != 'middle-center' -%}
      {%- if request.page_type == 'index' -%}<h1 class="header__heading">{%- endif -%}
      <a href="{{ routes.root_url }}" class="header__heading-link link link--text focus-inset">
        {%- if settings.logo != blank -%}
          <div class="header__heading-logo-wrapper">
            {%- assign logo_alt = settings.logo.alt | default: shop.name | escape -%}
            {{ settings.logo | image_url: width: 600 | image_tag: class: 'header__heading-logo', width: section.settings.logo_width, alt: logo_alt, preload: true }}
          </div>
        {%- else -%}
          <span class="h2">{{ shop.name }}</span>
        {%- endif -%}
      </a>
      {%- if request.page_type == 'index' -%}</h1>{%- endif -%}
    {%- endif -%}

    {%- if section.settings.menu != blank -%}
      {%- if section.settings.menu_type_desktop == 'dropdown' -%}
        {% render 'header-dropdown-menu' %}
      {%- elsif section.settings.menu_type_desktop != 'drawer' -%}
        {% render 'header-mega-menu' %}
      {%- endif -%}
    {%- endif -%}

    {%- if section.settings.logo_position == 'middle-center' -%}
      {%- if request.page_type == 'index' -%}<h1 class="header__heading">{%- endif -%}
      <a href="{{ routes.root_url }}" class="header__heading-link link link--text focus-inset">
        {%- if settings.logo != blank -%}
          <div class="header__heading-logo-wrapper">
            {%- assign logo_alt = settings.logo.alt | default: shop.name | escape -%}
            {{ settings.logo | image_url: width: 600 | image_tag: class: 'header__heading-logo', width: section.settings.logo_width, alt: logo_alt, preload: true }}
          </div>
        {%- else -%}
          <span class="h2">{{ shop.name }}</span>
        {%- endif -%}
      </a>
      {%- if request.page_type == 'index' -%}</h1>{%- endif -%}
    {%- endif -%}

    <div class="header__icons">
      <details-modal class="header__search">
        <details>
            <summary class="header__icon header__icon--search header__icon--summary link focus-inset modal__toggle">
                <span><svg class="icon icon-search" aria-hidden="true" focusable="false"><use href="#icon-search"></use></svg></span>
            </summary>
             <div class="search-modal modal__content gradient" role="dialog" aria-modal="true" aria-label="{{ 'general.search.search' | t }}">
                <div class="search-modal__content" tabindex="-1">
                    <form action="{{ routes.search_url }}" method="get" role="search" class="search search-modal__form">
                      <div class="field">
                        <input class="search__input field__input" id="Search-In-Modal-2" type="search" name="q" value="" placeholder="{{ 'general.search.search' | t }}">
                        <label class="field__label" for="Search-In-Modal-2">{{ 'general.search.search' | t }}</label>
                        <button class="search__button field__button" aria-label="{{ 'general.search.search' | t }}"><svg class="icon icon-search" aria-hidden="true" focusable="false" role="presentation"><use href="#icon-search"></use></svg></button>
                      </div>
                    </form>
                </div>
             </div>
        </details>
      </details-modal>
      <a href="{{ routes.cart_url }}" class="header__icon header__icon--cart link focus-inset" id="cart-icon-bubble">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7 18C7.55228 18 8 17.5523 8 17C8 16.4477 7.55228 16 7 16C6.44772 16 6 16.4477 6 17C6 17.5523 6.44772 18 7 18Z" fill="currentColor"/>
          <path d="M16 18C16.5523 18 17 17.5523 17 17C17 16.4477 16.5523 16 16 16C15.4477 16 15 16.4477 15 17C15 17.5523 15.4477 18 16 18Z" fill="currentColor"/>
          <path d="M2 2H3.5L5.5 13H16L18 5H5" stroke="currentColor" stroke-width="2"/>
        </svg>  
        <span class="visually-hidden">{{ 'templates.cart.cart' | t }}</span>
        {%- if cart != empty -%}
          <div class="cart-count-bubble">
            {%- if cart.item_count < 100 -%}<span aria-hidden="true">{{ cart.item_count }}</span>{%- endif -%}
            <span class="visually-hidden">{{ 'sections.header.cart_count' | t: count: cart.item_count }}</span>
          </div>
        {%- endif -%}
      </a>
    </div>
  </header>

  {%- assign mega_tabs = section.blocks | where: "type", "mega_tab" -%}
  {%- if mega_tabs.size > 0 -%}
    <div class="cat-strip" role="tablist">
      {%- for block in mega_tabs -%}
        <button class="cat-strip__item" role="tab" data-key="block-{{ block.id }}">
          {{ block.settings.tab_label }}
        </button>
      {%- endfor -%}
    </div>

    <div id="cat-portals-wrapper" class="cat-portals-wrapper">
      {%- for block in mega_tabs -%}
        <section class="cat-portal color-{{ block.settings.color_scheme }} gradient" data-key="block-{{ block.id }}" aria-hidden="true">
          <aside class="cat-portal__left">
            <div>
              <h3 class="cat-portal__title">{{ block.settings.sidebar_title }}</h3>
              {% if block.settings.btn_link != blank %}
                <a class="cat-portal__link" href="{{ block.settings.btn_link }}">{{ block.settings.btn_label | default: "Shop All" }}</a>
              {% endif %}
              <div style="height:2px; width:40px; background:rgb(var(--color-foreground)); margin-top:15px;"></div>
            </div>
            {% if block.settings.review_text != blank %}
            <div>
              <div class="cat-portal__desc">"{{ block.settings.review_text }}"</div>
              <div class="cat-portal__endorse" style="background: rgba(var(--color-foreground),0.05); margin-top:20px; padding:10px; border-radius:8px; display:flex; align-items:center; gap:12px;">
                {% if block.settings.reviewer_image %}
                  <img src="{{ block.settings.reviewer_image | image_url: width: 100 }}" style="width:40px; height:40px; border-radius:50%; object-fit:cover;" loading="lazy">
                {% endif %}
                <div style="font-size:12px; font-weight:700;">
                  <div>{{ block.settings.reviewer_name }}</div>
                  <div>★★★★★</div>
                </div>
              </div>
            </div>
            {% endif %}
          </aside>
          <div class="cat-portal__grid">
            {% assign collection = collections[block.settings.collection] %}
            {% if collection != blank %}
              {% for product in collection.products limit: 4 %}
                <a href="{{ product.url }}" class="cat-prod">
                  <div class="cat-prod__media">
                    <img src="{{ product.featured_image | image_url: width: 400 }}" loading="lazy" alt="{{ product.title }}">
                    {% if product.compare_at_price > product.price %}
                      <span class="cat-prod__badge">Sale</span>
                    {% endif %}
                  </div>
                  <div class="cat-prod__title">{{ product.title }}</div>
                  <div class="cat-prod__price">
                    {% if product.compare_at_price > product.price %}
                      <span class="cmp">{{ product.compare_at_price | money }}</span>
                    {% endif %}
                    <span class="prc">{{ product.price | money }}</span>
                  </div>
                </a>
              {% endfor %}
            {% else %}
              <p>Select a collection in settings.</p>
            {% endif %}
          </div>
        </section>
      {%- endfor -%}
    </div>
  {%- endif -%}
</{{ header_tag }}>

{%- if settings.cart_type == 'notification' -%}
  {%- render 'cart-notification', color_scheme: section.settings.color_scheme, desktop_menu_type: section.settings.menu_type_desktop -%}
{%- endif -%}

{% javascript %}
  class StickyHeader extends HTMLElement {
    constructor() { super(); }
    
    connectedCallback() {
      this.header = document.querySelector('.section-header');
      this.wrapper = this.querySelector('.header-wrapper');
      this.headerIsAlwaysSticky = this.getAttribute('data-sticky-type') === 'always' || this.getAttribute('data-sticky-type') === 'reduce-logo-size';
      
      // Data Attributes
      this.classHome = this.getAttribute('data-class-home');
      this.classDefault = this.getAttribute('data-class-default');
      this.classSticky = this.getAttribute('data-class-sticky');
      this.isHome = this.getAttribute('data-is-home') === 'true';

      // Set initial height CSS var
      this.setHeaderHeight();
      window.matchMedia('(max-width: 990px)').addEventListener('change', this.setHeaderHeight.bind(this));
      
      if (this.headerIsAlwaysSticky) { 
        this.header.classList.add('shopify-section-header-sticky'); 
      }

      this.currentScrollTop = 0;
      this.onScrollHandler = this.onScroll.bind(this);
      
      // Use standard scroll event (More reliable than IntersectionObserver for this use case)
      window.addEventListener('scroll', this.onScrollHandler, { passive: true });
      
      // Force run on load to fix "Page Switch" state
      this.onScroll();
      
      // Remove transition block
      setTimeout(() => {
        if(this.wrapper) this.wrapper.classList.remove('no-transition');
      }, 300);
    }

    setHeaderHeight() { 
        document.documentElement.style.setProperty('--header-height', `${this.header.offsetHeight}px`); 
    }

    disconnectedCallback() { 
        window.removeEventListener('scroll', this.onScrollHandler); 
    }

    onScroll() {
      const scrollTop = window.scrollY;
      const headerHeight = this.header.offsetHeight;
      const triggerPoint = headerHeight / 2;

      const isScrollDown = scrollTop > this.currentScrollTop && scrollTop > triggerPoint;
      const isScrollUp = scrollTop < this.currentScrollTop && scrollTop > triggerPoint;
      const isAtTop = scrollTop <= triggerPoint;

      if (isScrollDown || isScrollUp) {
         // --- STICKY MODE ---
         if (isScrollDown && !this.headerIsAlwaysSticky) {
             this.header.classList.add('shopify-section-header-hidden', 'shopify-section-header-sticky');
         } else {
             this.header.classList.remove('shopify-section-header-hidden');
             this.header.classList.add('shopify-section-header-sticky', 'animate');
         }
         this.updateState('sticky');

      } else if (isAtTop) {
         // --- TOP MODE ---
         this.header.classList.remove('shopify-section-header-hidden', 'shopify-section-header-sticky', 'animate');
         
         if (this.isHome) {
            this.updateState('transparent');
         } else {
            this.updateState('standard');
         }
      }

      this.currentScrollTop = scrollTop;
    }

    updateState(newState) {
       if(!this.wrapper) return;
       const currentState = this.wrapper.getAttribute('data-state');
       if(currentState === newState) return;
       
       this.wrapper.setAttribute('data-state', newState);

       this.wrapper.classList.remove(this.classHome, this.classDefault, this.classSticky);
       
       if(newState === 'sticky') {
           if(this.classSticky) this.wrapper.classList.add(this.classSticky);
       } else if (newState === 'transparent') {
           if(this.classHome) this.wrapper.classList.add(this.classHome);
       } else if (newState === 'standard') {
           if(this.classDefault) this.wrapper.classList.add(this.classDefault);
       }
    }
  }
  customElements.define('sticky-header', StickyHeader);

  // Mega Menu JS
  document.addEventListener('DOMContentLoaded', function() {
    const wrapper = document.getElementById('cat-portals-wrapper');
    const tabs = document.querySelectorAll('.cat-strip__item');
    const portals = document.querySelectorAll('.cat-portal');
    const headerSection = document.querySelector('.section-header');
    
    if(!wrapper) return;

    function closeMenu() {
      wrapper.classList.remove('is-open');
      setTimeout(() => { if(!wrapper.classList.contains('is-open')) wrapper.style.display = 'none'; }, 300);
      tabs.forEach(t => t.classList.remove('is-active'));
      portals.forEach(p => p.setAttribute('aria-hidden', 'true'));
    }

    tabs.forEach(tab => {
      tab.addEventListener('mouseenter', function() {
        const key = this.dataset.key;
        tabs.forEach(t => t.classList.remove('is-active'));
        portals.forEach(p => p.setAttribute('aria-hidden', 'true'));
        
        this.classList.add('is-active');
        const target = document.querySelector(`.cat-portal[data-key="${key}"]`);
        
        if(target) {
          wrapper.style.display = 'block';
          requestAnimationFrame(() => {
              wrapper.classList.add('is-open');
              target.setAttribute('aria-hidden', 'false');
          });
        }
      });
    });
    
    if(headerSection) {
        headerSection.addEventListener('mouseleave', closeMenu);
    }
  });
{% endjavascript %}

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "name": {{ shop.name | json }},
    {% if settings.logo %}
      "logo": {{ settings.logo | image_url: width: 500 | prepend: "https:" | json }},
    {% endif %}
    "url": {{ request.origin | append: page.url | json }}
  }
</script>

{% schema %}
{
  "name": "Header & Drawer",
  "class": "section-header",
  "max_blocks": 25,
  "settings": [
    {
      "type": "select",
      "id": "logo_position",
      "options": [
        { "value": "top-left", "label": "Top Left" },
        { "value": "top-center", "label": "Top Center" },
        { "value": "middle-left", "label": "Middle Left" },
        { "value": "middle-center", "label": "Middle Center" }
      ],
      "default": "middle-left",
      "label": "Logo Position (Desktop)"
    },
    {
      "type": "select",
      "id": "mobile_logo_position",
      "options": [
        { "value": "center", "label": "Center" },
        { "value": "left", "label": "Left" }
      ],
      "default": "center",
      "label": "Logo Position (Mobile)"
    },
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "Desktop Menu"
    },
    {
        "type": "select",
        "id": "menu_type_desktop",
        "options": [
            { "value": "dropdown", "label": "Dropdown" },
            { "value": "mega", "label": "Mega Menu" },
            { "value": "drawer", "label": "Drawer" }
        ],
        "default": "dropdown",
        "label": "Desktop Menu Type"
    },
    {
      "type": "select",
      "id": "sticky_header_type",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "on-scroll-up", "label": "On Scroll Up" },
        { "value": "always", "label": "Always" },
        { "value": "reduce-logo-size", "label": "Always (Reduce Logo)" }
      ],
      "default": "on-scroll-up",
      "label": "Sticky Header Type"
    },
    {
      "type": "checkbox",
      "id": "enable_sticky_blur",
      "default": true,
      "label": "Enable Blur on Sticky Header"
    },
    {
      "type": "checkbox",
      "id": "show_line_separator",
      "default": true,
      "label": "Show Bottom Border"
    },
    {
      "type": "header",
      "content": "Color Schemes"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Default/Other Pages Color",
      "info": "Used on all pages EXCEPT Homepage",
      "default": "scheme-1"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme_home",
      "label": "Home Page Color",
      "info": "Used ONLY on Homepage (Transparent)",
      "default": "scheme-1"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme_sticky",
      "label": "Sticky Header Color",
      "info": "Used when scrolling down",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Mobile Drawer Settings"
    },
    {
       "type": "color_scheme",
       "id": "menu_color_scheme",
       "label": "Mobile Drawer Color Scheme",
       "default": "scheme-1"
    },
    {
        "type": "text",
        "id": "drawer_slider_title",
        "label": "Mobile Slider Title",
        "default": "BEST SELLERS - LOW STOCK ⚠️"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 36,
      "step": 4,
      "unit": "px",
      "label": "Padding Top",
      "default": 20
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 36,
      "step": 4,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 20
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 0
    }
  ],
  "blocks": [
    {
      "type": "mega_tab",
      "name": "Desktop Mega Tab",
      "settings": [
        { "type": "text", "id": "tab_label", "label": "Tab Label", "default": "Best Sellers" },
        { "type": "color_scheme", "id": "color_scheme", "label": "Dropdown Color Scheme", "default": "scheme-1" },
        { "type": "collection", "id": "collection", "label": "Select Collection" },
        { "type": "text", "id": "sidebar_title", "label": "Sidebar Title" },
        { "type": "url", "id": "btn_link", "label": "Button Link" },
        { "type": "text", "id": "btn_label", "label": "Button Label", "default": "Shop All" },
        { "type": "textarea", "id": "review_text", "label": "Review Text" },
        { "type": "image_picker", "id": "reviewer_image", "label": "Reviewer Image" },
        { "type": "text", "id": "reviewer_name", "label": "Reviewer Name" }
      ]
    },
    {
      "type": "mobile_slider_product",
      "name": "Mobile Drawer: Slider",
      "settings": [
        { "type": "product", "id": "product", "label": "Select Product" },
        { "type": "text", "id": "custom_badge", "label": "Badge Text (e.g. Sale)", "default": "Sale" }
      ]
    },
    {
      "type": "mobile_category",
      "name": "Mobile Drawer: Category",
      "settings": [
        { "type": "image_picker", "id": "icon", "label": "Icon Image (PNG)" },
        { "type": "text", "id": "title", "label": "Category Title" },
        { "type": "collection", "id": "collection", "label": "Link Collection (Step 2)", "info": "This populates the second step." },
        { "type": "textarea", "id": "step2_review", "label": "Step 2 Review Quote" },
        { "type": "text", "id": "step2_reviewer", "label": "Step 2 Reviewer Name" },
        { "type": "image_picker", "id": "step2_avatar", "label": "Reviewer Avatar" }
      ]
    },
    {
      "type": "mobile_footer_link",
      "name": "Mobile Drawer: Footer",
      "settings": [
        { "type": "text", "id": "title", "label": "Link Title" },
        { "type": "url", "id": "url", "label": "Link URL" }
      ]
    }
  ]
}
{% endschema %}